<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>MystAI ‚Ä¢ AI Tarot Pro</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />

  <style>
    :root {
      --bg-main: radial-gradient(circle at top, #1e3269 0%, #050815 55%, #02030a 100%);
      --panel-bg: linear-gradient(135deg, rgba(7, 13, 35, 0.95), rgba(2, 5, 18, 0.98));
      --accent: #ffd866;
      --accent-soft: rgba(255, 216, 102, 0.18);
      --border-subtle: rgba(255, 255, 255, 0.16);
      --text-soft: #b9c0ff;
      --danger: #ff6b81;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", "Inter", sans-serif;
      background: var(--bg-main);
      color: #fff;
      display: flex;
      flex-direction: column;
    }

    /* TOPBAR */
    .topbar {
      width: 100%;
      padding: 10px 18px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      backdrop-filter: blur(22px);
      background: linear-gradient(
        to right,
        rgba(1, 7, 24, 0.92),
        rgba(4, 10, 35, 0.6)
      );
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .brand-logo {
      width: 30px;
      height: 30px;
      border-radius: 11px;
      background: radial-gradient(circle at 20% 0%, #ffd866 0, #fcbf49 40%, #f77f00 80%);
      box-shadow: 0 0 18px rgba(255, 216, 102, 0.7);
    }

    .brand-text {
      font-weight: 700;
      letter-spacing: 0.09em;
      font-size: 14px;
      text-transform: uppercase;
    }

    .top-right {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .lang-toggle {
      display: inline-flex;
      align-items: center;
      gap: 3px;
      padding: 3px;
      border-radius: 999px;
      background: rgba(3, 8, 24, 0.9);
      border: 1px solid rgba(255, 255, 255, 0.14);
    }

    .lang-btn {
      border: none;
      border-radius: 999px;
      padding: 4px 10px;
      font-size: 11px;
      cursor: pointer;
      background: transparent;
      color: #cfd4ff;
    }

    .lang-btn.active {
      background: var(--accent);
      color: #050814;
      font-weight: 600;
    }

    .top-ghost,
    .top-primary {
      border-radius: 999px;
      padding: 6px 12px;
      font-size: 12px;
      border: 1px solid rgba(255, 255, 255, 0.18);
      background: transparent;
      color: #e6e8ff;
      cursor: pointer;
    }

    .top-primary {
      background: var(--accent);
      color: #050814;
      border-color: transparent;
      font-weight: 600;
    }

    .top-primary:hover {
      filter: brightness(1.05);
    }

    .top-ghost:hover {
      background: rgba(255, 255, 255, 0.06);
    }

    /* MAIN LAYOUT */
    .page {
      flex: 1;
      display: flex;
      justify-content: center;
      padding: 20px 16px 26px;
    }

    .layout {
      width: 100%;
      max-width: 1120px;
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1fr);
      gap: 22px;
    }

    .panel {
      position: relative;
      border-radius: 18px;
      background: var(--panel-bg);
      border: 1px solid rgba(255, 255, 255, 0.08);
      box-shadow:
        0 24px 70px rgba(0, 0, 0, 0.9),
        0 0 0 1px rgba(102, 178, 255, 0.18);
      overflow: hidden;
      padding: 18px 18px 20px;
    }

    .panel::before {
      content: "";
      position: absolute;
      inset: -45%;
      background:
        radial-gradient(circle at top left, rgba(255, 216, 102, 0.32) 0, transparent 55%),
        radial-gradient(circle at bottom right, rgba(94, 135, 255, 0.35) 0, transparent 55%);
      opacity: 0.23;
      pointer-events: none;
    }

    .panel-inner {
      position: relative;
      z-index: 2;
    }

    /* LEFT PANEL */
    .section-kicker {
      font-size: 11px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--accent);
      margin-bottom: 4px;
    }

    .title-main {
      font-size: 26px;
      font-weight: 700;
      margin-bottom: 6px;
    }

    .subtitle {
      font-size: 13px;
      color: var(--text-soft);
      max-width: 420px;
      line-height: 1.5;
      margin-bottom: 10px;
    }

    .subtitle span {
      color: #fff;
      font-weight: 500;
    }

    .tagline {
      font-size: 11px;
      color: rgba(255, 255, 255, 0.8);
      margin-bottom: 10px;
    }

    .card-grid {
      display: flex;
      gap: 16px;
      justify-content: space-between;
      margin: 10px 0 8px;
    }

    .tarot-slot {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
    }

    .tarot-pos-label {
      font-size: 11px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: rgba(255, 255, 255, 0.75);
    }

    .tarot-card {
      width: 120px;
      max-width: 34vw;
      aspect-ratio: 9/16;
      border-radius: 14px;
      perspective: 1200px;
      cursor: pointer;
    }

    .card-inner {
      width: 100%;
      height: 100%;
      border-radius: inherit;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.75s cubic-bezier(.19,1,.22,1);
    }

    .tarot-card.flipped .card-inner {
      transform: rotateY(180deg);
    }

    .card-face {
      position: absolute;
      inset: 0;
      border-radius: inherit;
      backface-visibility: hidden;
      overflow: hidden;
    }

    .card-face.front {
      background: radial-gradient(circle at 30% 0%, #ffd866 0, #f77f00 38%, #4a2b87 80%);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow:
        0 10px 24px rgba(0, 0, 0, 0.7),
        0 0 20px rgba(255, 216, 102, 0.55);
    }

    .card-face.front::after {
      content: "";
      position: absolute;
      inset: 9%;
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.4);
      box-shadow:
        0 0 18px rgba(255, 255, 255, 0.35),
        inset 0 0 18px rgba(0, 0, 0, 0.45);
    }

    .myst-spiral {
      width: 48%;
      height: 48%;
      border-radius: 999px;
      border: 2px solid rgba(255, 255, 255, 0.9);
      box-shadow:
        0 0 18px rgba(255, 255, 255, 0.9),
        0 0 40px rgba(255, 216, 102, 0.9);
      position: relative;
    }

    .myst-spiral::before,
    .myst-spiral::after {
      content: "";
      position: absolute;
      inset: 14%;
      border-radius: inherit;
      border: 1px dashed rgba(255, 255, 255, 0.7);
    }

    .myst-spiral::after {
      inset: 29%;
      border-style: solid;
      opacity: 0.8;
    }

    .card-face.back {
      transform: rotateY(180deg);
      background: #050814;
      display: flex;
      flex-direction: column;
      padding: 8px;
      gap: 5px;
    }

    .card-img-wrap {
      flex: 1;
      border-radius: 10px;
      overflow: hidden;
      background: radial-gradient(circle at top, #313b6d 0, #050815 60%);
      border: 1px solid rgba(255, 255, 255, 0.18);
    }

    .card-img-wrap img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .card-meta-text {
      margin-top: 4px;
    }

    .card-name {
      font-size: 12px;
      font-weight: 600;
    }

    .card-vibe {
      font-size: 11px;
      color: var(--text-soft);
    }

    .hint {
      font-size: 11px;
      color: rgba(255, 255, 255, 0.8);
      margin: 10px 0 6px;
    }

    .hint strong {
      color: var(--accent);
    }

    .label-small {
      font-size: 12px;
      margin-bottom: 4px;
    }

    textarea {
      width: 100%;
      min-height: 60px;
      max-height: 100px;
      resize: vertical;
      border-radius: 10px;
      border: 1px solid var(--border-subtle);
      background: rgba(4, 10, 30, 0.94);
      color: #fff;
      padding: 8px 10px;
      font-size: 13px;
      outline: none;
    }

    textarea::placeholder {
      color: rgba(185, 192, 255, 0.68);
    }

    .actions-row {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .btn-primary {
      flex: 1;
      border: none;
      border-radius: 999px;
      padding: 10px 14px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      background: var(--accent);
      color: #000814;
      box-shadow:
        0 8px 22px rgba(0, 0, 0, 0.7),
        0 0 14px rgba(255, 216, 102, 0.7);
    }

    .btn-primary:hover {
      filter: brightness(1.05);
    }

    .btn-ghost {
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.25);
      background: rgba(3, 9, 25, 0.95);
      color: #dce0ff;
      padding: 10px 12px;
      font-size: 13px;
      cursor: pointer;
      white-space: nowrap;
    }

    .btn-ghost:hover {
      background: rgba(255, 255, 255, 0.08);
    }

    /* RIGHT PANEL */
    .reading-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .reading-title {
      font-size: 17px;
      font-weight: 600;
    }

    .pill {
      font-size: 11px;
      border-radius: 999px;
      padding: 4px 10px;
      background: rgba(5, 13, 35, 0.95);
      border: 1px solid rgba(255, 255, 255, 0.18);
      color: var(--text-soft);
    }

    .reading-tags {
      font-size: 11px;
      color: var(--text-soft);
      margin-bottom: 6px;
    }

    .reading-card-list {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 6px;
    }

    .reading-pill {
      font-size: 11px;
      border-radius: 999px;
      padding: 3px 8px;
      background: rgba(2, 7, 20, 0.95);
      border: 1px solid rgba(255, 255, 255, 0.14);
    }

    .reading-box {
      margin-top: 6px;
      padding: 10px;
      border-radius: 10px;
      background: rgba(5, 10, 30, 0.97);
      border: 1px solid rgba(255, 255, 255, 0.15);
      min-height: 180px;
      max-height: 260px;
      overflow-y: auto;
      font-size: 13px;
      line-height: 1.6;
    }

    .reading-box p {
      margin-bottom: 8px;
    }

    .listen-row {
      display: flex;
      justify-content: flex-end;
      gap: 6px;
      margin-top: 7px;
    }

    .btn-icon {
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.25);
      background: rgba(3, 9, 25, 0.96);
      padding: 6px 10px;
      font-size: 12px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      color: #e4e7ff;
    }

    .btn-icon span:first-child {
      font-size: 15px;
    }

    .btn-icon:hover {
      background: rgba(255, 255, 255, 0.08);
    }

    .status-text {
      font-size: 11px;
      margin-top: 6px;
      color: var(--text-soft);
    }

    .status-text.error {
      color: var(--danger);
    }

    .reading-footer {
      margin-top: 8px;
      font-size: 10px;
      color: rgba(185, 192, 255, 0.75);
    }

    .muted {
      opacity: 0.75;
    }

    /* RESPONSIVE */
    @media (max-width: 900px) {
      .layout {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    @media (max-width: 640px) {
      .page {
        padding: 14px 10px 20px;
      }

      .panel {
        padding: 14px 12px 16px;
      }

      .title-main {
        font-size: 22px;
      }

      .card-grid {
        gap: 10px;
      }

      .tarot-card {
        width: 30vw;
      }

      .top-right {
        display: none;
      }
    }
  </style>
</head>

<body>
  <!-- TOPBAR -->
  <header class="topbar">
    <div class="brand">
      <div class="brand-logo"></div>
      <div class="brand-text">MYSTAI ‚Ä¢ TAROT</div>
    </div>
    <div class="top-right">
      <div class="lang-toggle">
        <button class="lang-btn active" id="btn-tr">TR</button>
        <button class="lang-btn" id="btn-en">EN</button>
      </div>
      <button class="top-ghost" id="btn-back-app">Uygulamaya d√∂n</button>
      <button class="top-primary" id="btn-login-area">Hesabƒ±m</button>
    </div>
  </header>

  <!-- MAIN -->
  <main class="page">
    <div class="layout">

      <!-- LEFT PANEL -->
      <section class="panel">
        <div class="panel-inner">
          <div class="section-kicker" id="kicker">
            AI TAROT ‚Ä¢ 3 KART A√áILIMI
          </div>
          <h1 class="title-main" id="titleMain">AI Tarot A√ßƒ±lƒ±mƒ±</h1>
          <p class="subtitle" id="subtitle">
            Ge√ßmi≈ü ‚Äì ≈ûimdi ‚Äì Gelecek i√ßin √º√ß kart se√ß, niyetini yaz ve <span>MystAI</span>‚Äônin senin i√ßin enerjileri yorumlamasƒ±na izin ver.
          </p>
          <p class="tagline" id="tagline">
            Kartlara tƒ±klayarak a√ß. Her kart yalnƒ±zca bir kez se√ßilir; enerjiler tekrar etmez.
          </p>

          <div class="card-grid">
            <!-- PAST -->
            <div class="tarot-slot" data-slot="past">
              <div class="tarot-pos-label" id="labelPast">GE√áMƒ∞≈û</div>
              <div class="tarot-card" data-pos="past">
                <div class="card-inner">
                  <div class="card-face front">
                    <div class="myst-spiral"></div>
                  </div>
                  <div class="card-face back">
                    <div class="card-img-wrap">
                      <img data-role="image" src="" alt="" />
                    </div>
                    <div class="card-meta-text">
                      <div class="card-name" data-role="name"></div>
                      <div class="card-vibe" data-role="vibe"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- PRESENT -->
            <div class="tarot-slot" data-slot="present">
              <div class="tarot-pos-label" id="labelPresent">≈ûƒ∞MDƒ∞</div>
              <div class="tarot-card" data-pos="present">
                <div class="card-inner">
                  <div class="card-face front">
                    <div class="myst-spiral"></div>
                  </div>
                  <div class="card-face back">
                    <div class="card-img-wrap">
                      <img data-role="image" src="" alt="" />
                    </div>
                    <div class="card-meta-text">
                      <div class="card-name" data-role="name"></div>
                      <div class="card-vibe" data-role="vibe"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- FUTURE -->
            <div class="tarot-slot" data-slot="future">
              <div class="tarot-pos-label" id="labelFuture">GELECEK</div>
              <div class="tarot-card" data-pos="future">
                <div class="card-inner">
                  <div class="card-face front">
                    <div class="myst-spiral"></div>
                  </div>
                  <div class="card-face back">
                    <div class="card-img-wrap">
                      <img data-role="image" src="" alt="" />
                    </div>
                    <div class="card-meta-text">
                      <div class="card-name" data-role="name"></div>
                      <div class="card-vibe" data-role="vibe"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <p class="hint" id="hintText">
            <strong>ƒ∞pucu:</strong> Kartlara sƒ±rayla tƒ±kla. Her pozisyon (ge√ßmi≈ü ‚Äì ≈üimdi ‚Äì gelecek) i√ßin bir kart a√ßƒ±lacak.
          </p>

          <label class="label-small" id="questionLabel">Sorun / niyetin</label>
          <textarea id="questionInput"
            placeholder="A≈ük, kariyer, finans, ruhsal yolculuk... MystAI‚Äônin odaklanmasƒ±nƒ± istediƒüin ana temayƒ± yaz."></textarea>

          <div class="actions-row">
            <button class="btn-primary" id="btnRead">Tarot A√ßƒ±lƒ±mƒ±nƒ± Oku</button>
            <button class="btn-ghost" id="btnShuffle">üîÑ Kartlarƒ± Sƒ±fƒ±rla</button>
          </div>
        </div>
      </section>

      <!-- RIGHT PANEL -->
      <section class="panel">
        <div class="panel-inner">
          <div class="reading-header">
            <div>
              <div class="reading-title" id="readingTitle">Tarot A√ßƒ±lƒ±mƒ±m</div>
              <div class="reading-tags">
                <span class="muted" id="readingSubtitle">
                  Niyetini ve kartlarƒ±nƒ± se√ß; MystAI detaylƒ± yorumunu burada payla≈üsƒ±n.
                </span>
              </div>
            </div>
            <div class="pill" id="pillInfo">AI powered ‚Ä¢ MystAI</div>
          </div>

          <div class="reading-card-list" id="readingCardList"></div>

          <div class="reading-box" id="readingBox">
            <p id="readingPlaceholder">
              üîÆ Hen√ºz bir a√ßƒ±lƒ±m yapƒ±lmadƒ±.<br /><br />
              Sol tarafta √º√ß kartƒ±nƒ± se√ßip niyetini yazdƒ±ktan sonra
              <strong>‚ÄúTarot A√ßƒ±lƒ±mƒ±nƒ± Oku‚Äù</strong> tu≈üuna bastƒ±ƒüƒ±nda,
              MystAI kartlarƒ±n enerjisini kullanarak senin i√ßin derin, profesyonel bir yorum olu≈üturur.
            </p>
          </div>

          <div class="listen-row">
            <button class="btn-icon" id="btnSpeak">
              <span>üîä</span>
              <span id="speakLabel">Yorumu Sesli Dinle</span>
            </button>
          </div>

          <div class="status-text" id="statusText"></div>

          <div class="reading-footer" id="readingFooter">
            MystAI, farkƒ±ndalƒ±k ve eƒülence ama√ßlƒ± bir yapay zeka tarot deneyimidir; tƒ±bbi, finansal ya da hukuki profesyonel danƒ±≈ümanlƒ±k yerine ge√ßmez.
          </div>
        </div>
      </section>

    </div>
  </main>

  <script>
    /* ========== GLOBAL ========== */
    let currentLang = "tr";
    const selected = { past: null, present: null, future: null };

    const UI_TEXT = {
      tr: {
        kicker: "AI TAROT ‚Ä¢ 3 KART A√áILIMI",
        titleMain: "AI Tarot A√ßƒ±lƒ±mƒ±",
        subtitle:
          "Ge√ßmi≈ü ‚Äì ≈ûimdi ‚Äì Gelecek i√ßin √º√ß kart se√ß, niyetini yaz ve MystAI‚Äônin senin i√ßin enerjileri yorumlamasƒ±na izin ver.",
        tagline:
          "Kartlara tƒ±klayarak a√ß. Her kart yalnƒ±zca bir kez se√ßilir; enerjiler tekrar etmez.",
        labelPast: "GE√áMƒ∞≈û",
        labelPresent: "≈ûƒ∞MDƒ∞",
        labelFuture: "GELECEK",
        hint:
          "ƒ∞pucu: Kartlara sƒ±rayla tƒ±kla. Her pozisyon (ge√ßmi≈ü ‚Äì ≈üimdi ‚Äì gelecek) i√ßin bir kart a√ßƒ±lacak.",
        questionLabel: "Sorun / niyetin",
        questionPlaceholder:
          "A≈ük, kariyer, finans, ruhsal yolculuk... MystAI‚Äônin odaklanmasƒ±nƒ± istediƒüin ana temayƒ± yaz.",
        btnRead: "Tarot A√ßƒ±lƒ±mƒ±nƒ± Oku",
        btnShuffle: "üîÑ Kartlarƒ± Sƒ±fƒ±rla",
        readingTitle: "Tarot A√ßƒ±lƒ±mƒ±m",
        readingSubtitle:
          "Niyetini ve kartlarƒ±nƒ± se√ß; MystAI detaylƒ± yorumunu burada payla≈üsƒ±n.",
        speakLabel: "Yorumu Sesli Dinle",
        speakStatus: "üîä Yorum sesli okunuyor...",
        errorNoQuestion: "L√ºtfen √∂nce bir niyet / soru yaz.",
        errorNoCards: "L√ºtfen √∂nce √º√ß kartƒ± da se√ß.",
        loading: "üîÆ MystAI enerjileri √ß√∂z√ºml√ºyor... L√ºtfen birka√ß saniye bekle.",
        apiError:
          "‚ö†Ô∏è Baƒülantƒ± hatasƒ±: Yorum ≈üu anda y√ºklenemedi. Biraz sonra tekrar dene.",
        apiEmpty: "‚ö†Ô∏è Sunucu yanƒ±tƒ± alƒ±namadƒ±.",
        footer:
          "MystAI, farkƒ±ndalƒ±k ve eƒülence ama√ßlƒ± bir yapay zeka tarot deneyimidir; tƒ±bbi, finansal ya da hukuki profesyonel danƒ±≈ümanlƒ±k yerine ge√ßmez.",
        tagQuestion: "Niyet",
        mustHaveReading: "√ñnce bir a√ßƒ±lƒ±m olu≈üturmalƒ±sƒ±n."
      },
      en: {
        kicker: "AI TAROT ‚Ä¢ 3 CARD SPREAD",
        titleMain: "AI Tarot Reading",
        subtitle:
          "Choose three cards for Past ‚Äì Present ‚Äì Future, write your question and let MystAI read the energies for you.",
        tagline:
          "Click each card to reveal it. Each position gets one unique card ‚Äì no repeated energies.",
        labelPast: "PAST",
        labelPresent: "PRESENT",
        labelFuture: "FUTURE",
        hint:
          "Tip: Click the cards one by one. Each position (past ‚Äì present ‚Äì future) will reveal one card.",
        questionLabel: "Your question / intention",
        questionPlaceholder:
          "Love, career, finances, spiritual path... Write the main theme you want MystAI to focus on.",
        btnRead: "Read My Tarot",
        btnShuffle: "üîÑ Reset Cards",
        readingTitle: "My Tarot Reading",
        readingSubtitle:
          "Select your cards and intention; MystAI will generate a detailed reading here.",
        speakLabel: "Listen to Reading",
        speakStatus: "üîä Reading is being spoken...",
        errorNoQuestion: "Please write your question / intention first.",
        errorNoCards: "Please select all three cards first.",
        loading:
          "üîÆ MystAI is decoding the energies... Please wait a few seconds.",
        apiError:
          "‚ö†Ô∏è Connection error: Could not load the reading right now. Please try again.",
        apiEmpty: "‚ö†Ô∏è Server response was empty.",
        footer:
          "MystAI is an AI-powered tarot experience for self-reflection and entertainment; it does not replace professional medical, financial or legal advice.",
        tagQuestion: "Intention",
        mustHaveReading: "You need a reading first."
      }
    };

    /* ========== EXAMPLE TAROT DECK (MAJOR ARCANA ONLY) ==========
       Burada Major Arcana'nƒ±n 22 kartƒ±nƒ± kullanƒ±yoruz.
       Resim dosyalarƒ±:
       assets/cards/the-fool.png,
       assets/cards/the-magician.png, vb.
    */
    const TAROT_DECK = [
      {
        key: "the-fool",
        image: "assets/cards/the-fool.png",
        tr: {
          name: "Deli",
          vibe:
            "Deli, hayatƒ±nda yeni bir sayfa a√ßtƒ±ƒüƒ±nƒ± anlatƒ±r. Yolun tamamƒ±nƒ± g√∂rm√ºyor olsan bile, i√ßindeki merak ve saf g√ºven seni ileri √ßaƒüƒ±rƒ±yor. Hesap kitap yapmaktan √ßok, kalbinin √ßekildiƒüi yere cesaretle adƒ±m attƒ±ƒüƒ±nda, evren sana e≈ülik eder."
        },
        en: {
          name: "The Fool",
          vibe:
            "The Fool shows a fresh chapter opening in your life. Even if you cannot see the whole path yet, your curiosity and inner trust are calling you forward. When you step with courage instead of over-calculating, the universe walks with you."
        }
      },
      {
        key: "the-magician",
        image: "assets/cards/the-magician.png",
        tr: {
          name: "B√ºy√ºc√º",
          vibe:
            "B√ºy√ºc√º, sahip olduƒüun yetenekleri hafife almaman gerektiƒüini s√∂yler. Fikirlerin, deneyimlerin ve sezgilerin birlikte g√º√ßl√º bir kombinasyon olu≈üturuyor. Odaklandƒ±ƒüƒ±nda ve kendine inandƒ±ƒüƒ±nda, d√º≈ü√ºncelerini ger√ßeƒüe d√∂n√º≈üt√ºrecek g√ºce sahipsin."
        },
        en: {
          name: "The Magician",
          vibe:
            "The Magician tells you not to underestimate your abilities. Your ideas, experiences and intuition form a powerful combination. When you focus and trust yourself, you have the power to turn your thoughts into reality."
        }
      },
      {
        key: "the-high-priestess",
        image: "assets/cards/the-high-priestess.png",
        tr: {
          name: "Ba≈ürahibe",
          vibe:
            "Ba≈ürahibe, g√∂r√ºnmeyen tarafta d√∂nen enerjileri simgeler. Mantƒ±kla √ß√∂zemediƒüin bir durum ya≈üƒ±yor olabilirsin; kart sana sezgilerini ciddiye almanƒ±, r√ºyalarƒ±na, hislerine ve i√ß sesine daha √ßok alan a√ßmanƒ± hatƒ±rlatƒ±yor."
        },
        en: {
          name: "The High Priestess",
          vibe:
            "The High Priestess represents energies moving behind the scenes. You may be in a situation that logic alone cannot solve; this card reminds you to take your intuition seriously and to give more space to your dreams, feelings and inner voice."
        }
      },
      {
        key: "the-empress",
        image: "assets/cards/the-empress.png",
        tr: {
          name: "ƒ∞mparatori√ße",
          vibe:
            "ƒ∞mparatori√ße, sevgiyle beslediƒüin her ≈üeyin b√ºy√ºme potansiyelini anlatƒ±r. ƒ∞li≈ükiler, projeler veya kendi bedenin ve ruhun‚Ä¶ Ne kadar ≈üefkat ve √∂zen g√∂sterirsen, o kadar verimli sonu√ßlar alƒ±rsƒ±n. Bolluk seninle."
        },
        en: {
          name: "The Empress",
          vibe:
            "The Empress speaks of the growth of whatever you nourish with love. Relationships, projects or your own body and soul‚Ä¶ The more care and kindness you offer, the more fertile the results become. Abundance is with you."
        }
      },
      {
        key: "the-emperor",
        image: "assets/cards/the-emperor.png",
        tr: {
          name: "ƒ∞mparator",
          vibe:
            "ƒ∞mparator, saƒülam duru≈üu, sƒ±nƒ±r koymayƒ± ve sorumluluk almayƒ± temsil eder. Hayatƒ±nƒ±n kontrol√ºn√º ba≈ükasƒ±na bƒ±rakmak yerine, kendi kurallarƒ±nƒ± belirlemen gereken bir d√∂nemdesin. Disiplin ve kararlƒ±lƒ±k sana uzun vadeli g√º√ß kazandƒ±racak."
        },
        en: {
          name: "The Emperor",
          vibe:
            "The Emperor represents stability, boundaries and taking responsibility. Instead of giving your power away, this is a time to define your own rules. Discipline and determination will bring long-term strength."
        }
      },
      {
        key: "the-hierophant",
        image: "assets/cards/the-hierophant.png",
        tr: {
          name: "Ba≈ürahip",
          vibe:
            "Ba≈ürahip, gelenekleri, inan√ß sistemlerini ve √∂ƒüretmen fig√ºrlerini simgeler. Bir ustadan, mentordan ya da ruhsal bir kaynaktan destek alabilirsin. Ancak aynƒ± zamanda, sana artƒ±k dar gelen kurallarƒ± sorgulama zamanƒ±n da gelmi≈ü olabilir."
        },
        en: {
          name: "The Hierophant",
          vibe:
            "The Hierophant represents tradition, belief systems and teachers. You may receive support from a mentor or spiritual source. At the same time, it might be time to question any rules that no longer fit who you are."
        }
      },
      {
        key: "the-lovers",
        image: "assets/cards/the-lovers.png",
        tr: {
          name: "A≈üƒ±klar",
          vibe:
            "A≈üƒ±klar kartƒ±, kalbini ve deƒüerlerini ilgilendiren √∂nemli bir se√ßimden bahseder. Sadece mantƒ±ƒüa ya da korkuya g√∂re deƒüil, ger√ßekten sana iyi geleni se√ßmen gerekiyor. Hem a≈ük hem de ya≈üam kararlarƒ±nda, √∂zdeƒüerini unutmadan hareket et."
        },
        en: {
          name: "The Lovers",
          vibe:
            "The Lovers card speaks of an important choice involving your heart and values. You are asked to choose not from fear or pure logic, but from what truly nourishes you. In both love and life decisions, remember your self-worth."
        }
      },
      {
        key: "the-chariot",
        image: "assets/cards/the-chariot.png",
        tr: {
          name: "Sava≈ü Arabasƒ±",
          vibe:
            "Sava≈ü Arabasƒ±, ileri hareketi ve kararlƒ± adƒ±mlarƒ± simgeler. ƒ∞√ßindeki zƒ±t enerjileri tek bir y√∂nde topladƒ±ƒüƒ±nda b√ºy√ºk bir hƒ±z kazanabilirsin. Kararsƒ±zlƒ±k yerine net bir y√∂n se√ßmek, ba≈üarƒ±yƒ± senin i√ßin √ßok daha g√∂r√ºn√ºr kƒ±lacak."
        },
        en: {
          name: "The Chariot",
          vibe:
            "The Chariot symbolizes forward motion and determined steps. When you gather your conflicting energies and point them in one direction, you gain great momentum. Choosing a clear direction instead of staying indecisive brings success closer."
        }
      },
      {
        key: "strength",
        image: "assets/cards/strength.png",
        tr: {
          name: "G√º√ß",
          vibe:
            "G√º√ß kartƒ±, kaba kuvvetten √ßok, i√ßsel yumu≈üaklƒ±ktan gelen bir cesareti anlatƒ±r. Kendine ve ba≈ükalarƒ±na kar≈üƒ± merhametli davrandƒ±ƒüƒ±nda, √∂fke ve korku √ß√∂z√ºlmeye ba≈ülar. ≈ûefkat, ≈üu anda en g√º√ßl√º silahƒ±n."
        },
        en: {
          name: "Strength",
          vibe:
            "Strength talks about courage that comes not from brute force but from inner softness. When you treat yourself and others with compassion, anger and fear begin to melt. Compassion is your strongest weapon now."
        }
      },
      {
        key: "the-hermit",
        image: "assets/cards/the-hermit.png",
        tr: {
          name: "Ermi≈ü",
          vibe:
            "Ermi≈ü, dƒ±≈ü d√ºnyanƒ±n g√ºr√ºlt√ºs√ºnden uzakla≈üƒ±p kendi i√ßine d√∂nme ihtiyacƒ±nƒ± simgeler. Yalnƒ±z kalmak, senin i√ßin geri √ßekilmek deƒüil; ƒ±≈üƒ±ƒüƒ±nƒ± yeniden bulmak i√ßin bir fƒ±rsat. Cevaplar, kendi sessizliƒüinde saklƒ±."
        },
        en: {
          name: "The Hermit",
          vibe:
            "The Hermit represents the need to withdraw from outer noise and turn inward. Being alone is not a retreat from life for you, but a chance to find your own light again. The answers are hidden in your quiet."
        }
      },
      {
        key: "wheel-of-fortune",
        image: "assets/cards/wheel-of-fortune.png",
        tr: {
          name: "Kader √áarkƒ±",
          vibe:
            "Kader √áarkƒ±, hayat d√∂ng√ºlerinin deƒüi≈ümekte olduƒüunu s√∂yler. Kimi olaylar kontrol√ºn dƒ±≈üƒ±nda g√∂r√ºnebilir; ama akƒ±≈üƒ± kabul ettiƒüinde, bu d√∂n√º≈ü√ºm seni beklemediƒüin fƒ±rsatlarla bulu≈üturabilir."
        },
        en: {
          name: "Wheel of Fortune",
          vibe:
            "The Wheel of Fortune shows that life cycles are shifting. Some events may feel beyond your control, yet by accepting the flow, this change can bring you unexpected opportunities."
        }
      },
      {
        key: "justice",
        image: "assets/cards/justice.png",
        tr: {
          name: "Adalet",
          vibe:
            "Adalet kartƒ±, dengelenmekte olan bir durumdan bahseder. Ge√ßmi≈üteki se√ßimlerinin sonu√ßlarƒ±yla y√ºzle≈üiyor olabilirsin. Buradaki davet, hem kendine hem ba≈ükalarƒ±na kar≈üƒ± adil ve d√ºr√ºst olmaktƒ±r."
        },
        en: {
          name: "Justice",
          vibe:
            "Justice speaks of a situation coming into balance. You may be facing the consequences of past choices. The invitation is to be fair and honest, both with yourself and with others."
        }
      },
      {
        key: "the-hanged-man",
        image: "assets/cards/the-hanged-man.png",
        tr: {
          name: "Asƒ±lan Adam",
          vibe:
            "Asƒ±lan Adam, duraƒüanlƒ±k ya da askƒ±da kalmƒ±≈ü hissetmeyi temsil eder. Ancak bu bekleme hali, seni cezalandƒ±rmak i√ßin deƒüil, bakƒ±≈ü a√ßƒ±nƒ± deƒüi≈ütirmek i√ßin burada. Farklƒ± bir yerden bakarsan, √ß√∂z√ºm kendiliƒüinden g√∂r√ºnebilir."
        },
        en: {
          name: "The Hanged Man",
          vibe:
            "The Hanged Man represents feeling stuck or suspended. But this pause is not here to punish you; it is here to change your perspective. When you look from a different angle, the solution can appear on its own."
        }
      },
      {
        key: "death",
        image: "assets/cards/death.png",
        tr: {
          name: "√ñl√ºm",
          vibe:
            "√ñl√ºm kartƒ± fiziksel √∂l√ºmden √ßok, kapanan bir kapƒ±yƒ± temsil eder. Artƒ±k sana hizmet etmeyen bir d√∂ng√ºn√ºn sonundasƒ±n. Bƒ±rakabildiƒüin her ≈üey, seni daha √∂zg√ºr ve daha ger√ßek bir hayata doƒüru ta≈üƒ±r."
        },
        en: {
          name: "Death",
          vibe:
            "Death rarely means physical death; it represents a door closing. You are at the end of a cycle that no longer serves you. Whatever you can release now moves you toward a freer and more authentic life."
        }
      },
      {
        key: "temperance",
        image: "assets/cards/temperance.png",
        tr: {
          name: "Denge",
          vibe:
            "Denge kartƒ±, u√ßlarda gidip gelmek yerine ortayƒ± bulma ihtiyacƒ±nƒ± g√∂sterir. A≈üƒ±rƒ±ya ka√ßmak yerine, dozunda ve uyumlu se√ßimler yaptƒ±ƒüƒ±nda hem bedenin hem ruhun daha huzurlu hissedecek."
        },
        en: {
          name: "Temperance",
          vibe:
            "Temperance points to the need to find the middle path instead of swinging between extremes. When you choose balance over excess, both your body and soul feel more at peace."
        }
      },
      {
        key: "the-devil",
        image: "assets/cards/the-devil.png",
        tr: {
          name: "≈ûeytan",
          vibe:
            "≈ûeytan, baƒüƒ±mlƒ±lƒ±k, takƒ±ntƒ± ya da korku √ºzerinden seni tutan baƒülarƒ± simgeler. Kendini nerede mecbur hissediyorsan, orada aslƒ±nda se√ßeneƒüin olduƒüunu hatƒ±rla. Fark etmek, zinciri kƒ±rmanƒ±n ilk adƒ±mƒ±dƒ±r."
        },
        en: {
          name: "The Devil",
          vibe:
            "The Devil represents the ties that hold you through addiction, obsession or fear. Wherever you feel forced, remember you still have a choice. Seeing the pattern is the first step to breaking the chain."
        }
      },
      {
        key: "the-tower",
        image: "assets/cards/the-tower.png",
        tr: {
          name: "Kule",
          vibe:
            "Kule, beklenmedik sarsƒ±ntƒ±larƒ± ve yƒ±kƒ±lan eski yapƒ±larƒ± anlatƒ±r. Evet, s√ºre√ß rahatsƒ±z edici olabilir; ama √ß√∂ken ≈üey, zaten saƒülam olmayan temellerdir. Sonrasƒ±nda daha ger√ßek ve sana uygun bir yapƒ± kurma ≈üansƒ±n olacak."
        },
        en: {
          name: "The Tower",
          vibe:
            "The Tower speaks of unexpected shake-ups and old structures collapsing. The process can feel uncomfortable, but what falls is what was never truly stable. Afterwards, you get to build something more authentic and aligned with you."
        }
      },
      {
        key: "the-star",
        image: "assets/cards/the-star.png",
        tr: {
          name: "Yƒ±ldƒ±z",
          vibe:
            "Yƒ±ldƒ±z, karanlƒ±k bir d√∂nemden sonra gelen umudu simgeler. ƒ∞√ßsel ƒ±≈üƒ±ƒüƒ±n yeniden parlamaya ba≈üladƒ±ƒüƒ±nƒ± s√∂yl√ºyor. Kendine nazik davrandƒ±k√ßa, hayata bakƒ±≈üƒ±nƒ±n yumu≈üadƒ±ƒüƒ±nƒ± ve geleceƒüe dair inancƒ±nƒ±n g√º√ßlendiƒüini hissedeceksin."
        },
        en: {
          name: "The Star",
          vibe:
            "The Star symbolizes hope after a dark period. It tells you your inner light is beginning to shine again. As you treat yourself gently, your view of life softens and your faith in the future grows stronger."
        }
      },
      {
        key: "the-moon",
        image: "assets/cards/the-moon.png",
        tr: {
          name: "Ay",
          vibe:
            "Ay kartƒ±, belirsizlikleri, karƒ±≈üƒ±k duygularƒ± ve bazen de gereksiz korkularƒ± anlatƒ±r. Her ≈üey net g√∂r√ºnm√ºyor olabilir; bu nedenle sezgilerini dinlemek ve acele karar vermemek ≈üu anda senin i√ßin √ßok √∂nemli."
        },
        en: {
          name: "The Moon",
          vibe:
            "The Moon speaks of uncertainty, mixed emotions and sometimes unnecessary fears. Not everything is clear right now; listening to your intuition and avoiding rushed decisions is crucial for you at this time."
        }
      },
      {
        key: "the-sun",
        image: "assets/cards/the-sun.png",
        tr: {
          name: "G√ºne≈ü",
          vibe:
            "G√ºne≈ü, ne≈üe, netlik ve ba≈üarƒ± enerjisini hayatƒ±na ta≈üƒ±yor. Uzun s√ºredir beklediƒüin bir rahatlama ve g√∂r√ºn√ºr olma hali g√ºndeme gelebilir. Kendi ƒ±≈üƒ±ƒüƒ±nƒ± saklamadan parlamana izin ver."
        },
        en: {
          name: "The Sun",
          vibe:
            "The Sun brings joy, clarity and success into your life. A sense of relief and being seen may finally arrive. Allow yourself to shine without hiding your light."
        }
      },
      {
        key: "judgement",
        image: "assets/cards/judgement.png",
        tr: {
          name: "Yargƒ±",
          vibe:
            "Yargƒ±, ge√ßmi≈üten gelen bir konunun kapanmaya doƒüru gittiƒüini ve i√ßsel bir uyanƒ±≈ü ya≈üadƒ±ƒüƒ±nƒ± g√∂sterir. Eski hik√¢yeleri arkanda bƒ±rakma ve kendine daha d√ºr√ºst bir ≈üekilde bakma zamanƒ±."
        },
        en: {
          name: "Judgement",
          vibe:
            "Judgement shows a past chapter reaching closure and an inner awakening taking place. It is time to leave old stories behind and look at yourself with more honesty and compassion."
        }
      },
      {
        key: "the-world",
        image: "assets/cards/the-world.png",
        tr: {
          name: "D√ºnya",
          vibe:
            "D√ºnya, tamamlanmƒ±≈ü bir d√∂ng√ºy√º, elde edilen ba≈üarƒ±yƒ± ve b√ºt√ºnl√ºk hissini simgeler. ≈ûimdiye kadar yaptƒ±ƒüƒ±n yolculuƒüun meyvelerini topluyor ve yeni bir seviyeye ge√ßmeye hazƒ±rlanƒ±yorsun."
        },
        en: {
          name: "The World",
          vibe:
            "The World symbolizes a completed cycle, achieved success and a sense of wholeness. You are harvesting the fruits of your journey so far and getting ready to move to a new level."
        }
      }
    ];

    /* ========== LANGUAGE SWITCH ========== */
    function applyLang(lang) {
      currentLang = lang;
      const t = UI_TEXT[lang];

      document.getElementById("kicker").textContent = t.kicker;
      document.getElementById("titleMain").textContent = t.titleMain;
      document.getElementById("subtitle").textContent = t.subtitle;
      document.getElementById("tagline").textContent = t.tagline;
      document.getElementById("labelPast").textContent = t.labelPast;
      document.getElementById("labelPresent").textContent = t.labelPresent;
      document.getElementById("labelFuture").textContent = t.labelFuture;
      document.getElementById("hintText").textContent = t.hint;
      document.getElementById("questionLabel").textContent = t.questionLabel;
      document.getElementById("questionInput").placeholder =
        t.questionPlaceholder;
      document.getElementById("btnRead").textContent = t.btnRead;
      document.getElementById("btnShuffle").textContent = t.btnShuffle;
      document.getElementById("readingTitle").textContent = t.readingTitle;
      document.getElementById("readingSubtitle").textContent =
        t.readingSubtitle;
      document.getElementById("speakLabel").textContent = t.speakLabel;
      document.getElementById("readingFooter").textContent = t.footer;

      document.getElementById("btn-tr").classList.toggle(
        "active",
        lang === "tr"
      );
      document.getElementById("btn-en").classList.toggle(
        "active",
        lang === "en"
      );

      // Eƒüer kartlar se√ßildiyse, √∂zet satƒ±rlarƒ±nƒ± dili deƒüi≈üince g√ºncelle
      updateReadingCardList();
    }

    document.getElementById("btn-tr").addEventListener("click", () =>
      applyLang("tr")
    );
    document.getElementById("btn-en").addEventListener("click", () =>
      applyLang("en")
    );

    /* ========== CARD LOGIC ========== */
    const cardElems = document.querySelectorAll(".tarot-card");

    function randomCard(excludedKeys) {
      const pool = TAROT_DECK.filter((c) => !excludedKeys.includes(c.key));
      if (!pool.length) return null;
      const idx = Math.floor(Math.random() * pool.length);
      return pool[idx];
    }

    function getPosLabel(slot) {
      const t = UI_TEXT[currentLang];
      if (slot === "past") return t.labelPast;
      if (slot === "present") return t.labelPresent;
      return t.labelFuture;
    }

    function updateReadingCardList() {
      const t = UI_TEXT[currentLang];
      const list = document.getElementById("readingCardList");
      list.innerHTML = "";

      const q = document.getElementById("questionInput").value.trim();
      if (q) {
        const spanQ = document.createElement("span");
        spanQ.className = "reading-pill";
        spanQ.textContent = t.tagQuestion + ": " + q;
        list.appendChild(spanQ);
      }

      ["past", "present", "future"].forEach((slot) => {
        const data = selected[slot];
        if (!data) return;
        const span = document.createElement("span");
        span.className = "reading-pill";
        const label = getPosLabel(slot);
        const name =
          currentLang === "tr" ? data.tr.name : data.en.name;
        span.textContent = label + ": " + name;
        list.appendChild(span);
      });
    }

    cardElems.forEach((card) => {
      card.addEventListener("click", () => {
        const slot = card.getAttribute("data-pos");
        if (!slot) return;

        // Slot doldurulduysa tekrar se√ßilmesin
        if (selected[slot]) return;

        const usedKeys = Object.values(selected)
          .filter(Boolean)
          .map((c) => c.key);

        const cardData = randomCard(usedKeys);
        if (!cardData) return;

        selected[slot] = cardData;

        const inner = card.querySelector(".card-inner");
        const img = card.querySelector("[data-role='image']");
        const nameEl = card.querySelector("[data-role='name']");
        const vibeEl = card.querySelector("[data-role='vibe']");

        if (img) {
          img.src = cardData.image;
          img.alt =
            currentLang === "tr"
              ? cardData.tr.name
              : cardData.en.name;
        }
        if (nameEl) {
          nameEl.textContent =
            currentLang === "tr"
              ? cardData.tr.name
              : cardData.en.name;
        }
        if (vibeEl) {
          vibeEl.textContent =
            currentLang === "tr"
              ? cardData.tr.vibe
              : cardData.en.vibe;
        }

        inner.classList.add("flipped");
        card.classList.add("flipped");

        updateReadingCardList();
      });
    });

    /* ========== RESET ========= */
    document
      .getElementById("btnShuffle")
      .addEventListener("click", () => {
        selected.past = selected.present = selected.future = null;
        cardElems.forEach((card) => {
          card.classList.remove("flipped");
          const inner = card.querySelector(".card-inner");
          inner.classList.remove("flipped");
          const img = card.querySelector("[data-role='image']");
          const nameEl = card.querySelector("[data-role='name']");
          const vibeEl = card.querySelector("[data-role='vibe']");
          if (img) {
            img.src = "";
            img.alt = "";
          }
          if (nameEl) nameEl.textContent = "";
          if (vibeEl) vibeEl.textContent = "";
        });

        document.getElementById("readingCardList").innerHTML = "";

        const t = UI_TEXT[currentLang];
        document.getElementById("statusText").textContent = "";
        document.getElementById("readingBox").innerHTML =
          '<p id="readingPlaceholder">' +
          (currentLang === "tr"
            ? 'üîÆ Hen√ºz bir a√ßƒ±lƒ±m yapƒ±lmadƒ±.<br><br>Sol tarafta √º√ß kartƒ±nƒ± se√ßip niyetini yazdƒ±ktan sonra <strong>‚ÄúTarot A√ßƒ±lƒ±mƒ±nƒ± Oku‚Äù</strong> tu≈üuna bastƒ±ƒüƒ±nda, MystAI se√ßtiƒüin kartlarƒ±n enerjisini kullanarak senin i√ßin derin, profesyonel bir yorum olu≈üturur.'
            : 'üîÆ No spread has been cast yet.<br><br>Once you choose three cards and write your question, click <strong>‚ÄúRead My Tarot‚Äù</strong> and MystAI will generate a deep, professional reading for you.') +
          "</p>";
      });

    /* ========== AI BACKEND ========= */
    async function readTarot() {
      const t = UI_TEXT[currentLang];
      const question = document
        .getElementById("questionInput")
        .value.trim();
      const statusEl = document.getElementById("statusText");
      const box = document.getElementById("readingBox");

      statusEl.classList.remove("error");

      if (!question) {
        statusEl.classList.add("error");
        statusEl.textContent = t.errorNoQuestion;
        return;
      }

      if (!selected.past || !selected.present || !selected.future) {
        statusEl.classList.add("error");
        statusEl.textContent = t.errorNoCards;
        return;
      }

      statusEl.textContent = t.loading;
      box.innerHTML = "<p>" + t.loading + "</p>";

      const payload = {
        lang: currentLang,
        question,
        past: {
          key: selected.past.key,
          name:
            currentLang === "tr"
              ? selected.past.tr.name
              : selected.past.en.name,
          vibe:
            currentLang === "tr"
              ? selected.past.tr.vibe
              : selected.past.en.vibe
        },
        present: {
          key: selected.present.key,
          name:
            currentLang === "tr"
              ? selected.present.tr.name
              : selected.present.en.name,
          vibe:
            currentLang === "tr"
              ? selected.present.tr.vibe
              : selected.present.en.vibe
        },
        future: {
          key: selected.future.key,
          name:
            currentLang === "tr"
              ? selected.future.tr.name
              : selected.future.en.name,
          vibe:
            currentLang === "tr"
              ? selected.future.tr.vibe
              : selected.future.en.vibe
        }
      };

      try {
        // üî¥ Backend URL'yi burada kendi MystAI API adresinle deƒüi≈ütir
        const res = await fetch(
          "https://mystai-tarot-backend.example.com/api/tarot",
          {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(payload)
          }
        );

        const data = await res.json();
        if (data && data.answer) {
          box.innerHTML = data.answer;
          statusEl.textContent = "";
        } else {
          statusEl.classList.add("error");
          statusEl.textContent = t.apiEmpty;
          box.innerHTML = "<p>" + t.apiEmpty + "</p>";
        }
      } catch (err) {
        console.error(err);
        statusEl.classList.add("error");
        statusEl.textContent = t.apiError;
        box.innerHTML = "<p>" + t.apiError + "</p>";
      }

      updateReadingCardList();
    }

    document
      .getElementById("btnRead")
      .addEventListener("click", readTarot);

    /* ========== TTS (SES) ========= */
    document
      .getElementById("btnSpeak")
      .addEventListener("click", () => {
        const t = UI_TEXT[currentLang];
        const box = document.getElementById("readingBox");
        const statusEl = document.getElementById("statusText");
        const text = box.innerText.trim();

        if (!text || text.startsWith("üîÆ")) {
          statusEl.classList.add("error");
          statusEl.textContent = t.mustHaveReading;
          return;
        }

        statusEl.classList.remove("error");
        statusEl.textContent = t.speakStatus;

        const utter = new SpeechSynthesisUtterance(text);
        utter.lang = currentLang === "tr" ? "tr-TR" : "en-US";
        utter.rate = 1;
        utter.pitch = 1;

        utter.onend = () => {
          statusEl.textContent = "";
        };

        window.speechSynthesis.cancel();
        window.speechSynthesis.speak(utter);
      });

    /* INIT */
    applyLang("tr");
  </script>
</body>
</html>
